# JavaScript 内存管理

### 内存生命周期

1. 分配所需要的内存
2. 使用分配的内存（读、写）
3. 释放

JavaScript 在定义变量时就完成了内存的分配。（第一阶段）
使用变量即是对所分配内存的读写。（第二阶段）
垃圾回收。自动寻找不再需要的内存并释放，无法精确的判定某块内存是否需要，具有局限性。（第三阶段）

### 垃圾回收

#### 引用
垃圾回收算法主要依赖于引用的概念。在内存管理环境中，一个对象如果有访问另一个对象的权限（隐式或显式），
就叫做一个对象引用另一个对象。例如，一个 Javascript 对象具有对它的原型的引用（隐式引用）和对它的属性的引用（显式引用）。

#### 引用计数垃圾收集

此算法把“对象是否不再需要” 简化定义为“对象有没有其它对象引用它”，如果没有引用指向该对象（零引用），对象将被垃圾回收机制回收。

循环引用问题：
两个对象相互引用形成一个循环。

#### 标记-清除算法

这个算法把“对象是否不再需要”简化为“对象是否可以获得”。

该算法假定设置一个根（root）对象（JavaScript 里，根是全局对象）。垃圾回收器将定期从根开始，找所有从根开始引用的对象，
然后找到这些对象的引用的对象... ，从根开始，垃圾回收器将找到所有可以获得的对象和收集所有不能获得的对象。

相比引用计数的好处是，“零引用的对象”总是不能获得。

从 2012 年起，所有现代浏览器都使用了标记-清除垃圾回收算法。